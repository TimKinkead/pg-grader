<!-- Graded Work -->

<!-- title -->
<div class="jumbotron"
     style="background: #677F71; padding-top: 12px; padding-bottom: 18px;">
    <h2 class="text-center"
        style="color: whitesmoke;">
        Graded Work
    </h2>
</div>

<!-- new button -->
<div class="container text-center"
     style="margin-bottom: 15px;">
    <button ng-click="newScoreSheet()"
            class="btn btn-success">
        + New Score Sheet
    </button>
</div>

<!-- total count -->
<div class="container text-center">
    <p ng-if="!user.admin">
        You have saved <strong>{{scoresheets.length}}</strong> score sheets.
    </p>
    <p ng-if="user.admin">
        There are <strong>{{scoresheets.length}}</strong> total score sheets.
    </p>
</div>

<!-- messages -->
<div ng-if="successMessages.length"
     class="container"
     style="max-width: 600px;">
    <div ng-repeat="message in successMessages"
         class="alert alert-success"
         style="margin: 10px 0 0;">
        <span ng-click="closeSuccessMessage($index)"
              class="close">
            &times
        </span>
        {{message}}
    </div>
</div>
<div ng-if="errorMessages.length"
     class="container"
     style="max-width: 600px;">
    <div ng-repeat="message in errorMessages"
         class="alert alert-danger"
         style="margin: 10px 0 0;">
        <span ng-click="closeErrorMessage($index)"
              class="close">
            &times
        </span>
        {{message}}
    </div>
</div>

<!-- table -->
<div class="container">
    <table class="table table-bordered table-hover">
        <thead>
            <th ng-repeat="field in fields">
                {{field|capitalize}}
            </th>
        </thead>
        <tbody>
            <tr ng-repeat="sheet in scoresheets | orderBy:'-created'"
                ng-init="sheetIndex = $index+1"
                ng-click="editSheet(sheet)"
                style="cursor: pointer;"
                uib-tooltip="click to view/edit"
                tooltip-placement="right">
                <td ng-repeat="field in fields">
                    <div ng-if="['no', 'date', 'grader id', 'grader name', 'student work id', 'rubric', 'average score'].indexOf(field) < 0">
                        {{sheet[field]}}
                    </div>
                    <div ng-if="field === 'no'">
                        {{sheetIndex}}
                    </div>
                    <div ng-if="field === 'date'">
                        {{sheet.created|date:'short'}}
                    </div>
                    <div ng-if="field === 'grader id'">
                        {{sheet.user.id}}
                    </div>
                    <div ng-if="field === 'grader name'">
                        {{sheet.user.name}}
                    </div>
                    <div ng-if="field === 'student work id'">
                        {{sheet.studentWorkId}}
                    </div>
                    <div ng-if="field === 'rubric'">
                        {{sheet.rubric.name}}
                    </div>
                    <div ng-if="field === 'average score'">
                        {{sheet.score|averageScore}}
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>